/*
 * This file was generated by the Gradle 'init' task.
 *
 * This generated file contains a sample Java application project to get you started.
 * For more details take a look at the 'Building Java & JVM projects' chapter in the Gradle
 * User Manual available at https://docs.gradle.org/6.8.2/userguide/building_java_projects.html
 */

plugins {
    // Implement Gradle plugins
    id 'java'

    // We need Spigradle and the Shadow Plugin
    // just to make life easier for everyone.
    id 'kr.entree.spigradle' version '2.2.3'
    id 'com.github.johnrengelman.shadow' version '6.0.0'
}

// Setting some variables for our plugin!
group 'me.kokumaji'
version '1.0-DEV'
compileJava.options.encoding = 'UTF-8'

repositories {

    // Default Gradle repositories
    jcenter()
    mavenCentral()

    papermc()

    // PlaceholderAPI repository
    maven {
        url = 'https://repo.extendedclip.com/content/repositories/placeholderapi/'
    }

    // This is for bStats... cuz PlaceholderAPI doesnt like
    // being shadow jar'd without it...
    maven {
        url 'https://repo.codemc.org/repository/maven-public'
    }

    maven { url = "https://raw.githubusercontent.com/JorelAli/CommandAPI/mvn-repo/" }
    maven { url = "https://repo.codemc.org/repository/maven-public/" }

}
dependencies {
    // Use JUnit test framework.
    testImplementation 'junit:junit:4.13'

    // This dependency is used by the application.
    implementation 'com.google.guava:guava:29.0-jre'
}

dependencies {
    implementation 'org.jetbrains:annotations:20.1.0'
    annotationProcessor 'org.projectlombok:lombok:1.18.16'
    compileOnly 'org.projectlombok:lombok:1.18.16'

    // Since this is a PaperMC plugin, there is
    // no need to shadow anything into the final jar
    compileOnly paper()
    compileOnly 'me.clip:placeholderapi:2.10.9'
    compileOnly 'org.apache.logging.log4j:log4j-core:2.3'

    compileOnly 'io.netty:netty-all:4.0.23.Final'

    /* for later
    compileOnly "dev.jorel:commandapi-annotations:5.3"
    annotationProcessor "dev.jorel:commandapi-annotations:5.3"
    */

}

// vv Configuring the Gradle plugins below vv
tasks.build.dependsOn tasks.shadowJar

tasks.withType(Jar) {
    destinationDirectory = file("$rootDir/debug/plugins")
}

shadowJar {
    archiveClassifier.set('')
    project.configurations.implementation.canBeResolved = true
    configurations = [project.configurations.shadow]

    minimize()
}

spigot {
    description 'A KitPvP Plugin'
    authors 'Kokumaji'
    apiVersion '1.13'

    commands {
        debug {
            usage '/debug'
        }
    }
}

